<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>金立手机注册页面</title>
<link rel="stylesheet" type="text/css" href="css/register.css"/>
</head>
<body>
<!--header-->
<div class="header">
	<p>欢迎</p>
	<p>进入amigo的轻松世界!</p>
	<p>云服务  论坛 游戏大厅...</p>
	<!--登录部分-->
	<div class="login">
		<div class="anigo">
			<img src="img/login_3.png">
		</div>
		<div class="anigo_a1">
			<a href="">新账号注册</a>
			<form class="pho">
				<input name="phonea" class="pho_1" type="text" placeholder="请输入手机号"/>
				<span class="phone">请输入合法的手机号码</span>
				<input class="pho_2" type="text" placeholder="请输入验证码"/>
				<span id="btn">2b63</span>
				<span class="phone2">请输入正确的验证码</span>
				<input class="btn1" type="button" value="换一个"/>
				<input name="pass" class="btn2" type="password" placeholder="请输入密码"/>
				<span class="phone3">请输入正确的密码</span>
			</form>
			<form class="pho pho1">
				<input class="pho_3" type="button" value="注册">	
			</form>	
		</div>
	</div>
</div>
</body>
</html>
<script type="text/javascript" src="js/jquery-1.8.3.js"></script>
<script type="text/javascript" src="js/register.js"></script>
<script type="text/javascript" src="js/ajax1808.js"></script>
<script type="text/javascript" src="js/cookieTools.js"></script>
<script type="text/javascript">
window.onload=function(){
	function z(str){//#box .cls  p
	if(str.charAt(0)=="#"){
		return document.getElementById(str.substring(1));
	}else if(str.charAt(0)=="."){
		return document.getElementsByClassName(str.substring(1));
	}else{
		return document.getElementsByTagName(str);
	}
}	
	//随机数
	z(".btn1")[0].onclick=function(){
		z("#btn").innerHTML=nn();
	}
	//注册页面
	z(".pho_3")[0].onclick=function(){
		// console.log(1);
		let xhr=new XMLHttpRequest();
		xhr.open("post","php/register.php",true);
		xhr.onreadystatechange=function(){
			if(xhr.readyState==4 && xhr.status==200){
				var str=xhr.responseText;
				// console.log(str);
				if(str=="1"){
//					$(".result")[0].innerHTML="注册成功";
//					getCookie("phone");
					alert("注册成功");
					location.href="login.html";

				}else if(str=="-1"){
//					$(".result")[0].innerHTML="用户名已存在";
					alert("用户名已存在");
				}
			else{
//				$(".result")[0].innerHTML="服务器出错";
				alert("服务器出错");
				}
			}
		}
		xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
		let s="phonea="+z(".pho_1")[0].value+"&pass="+z(".btn2")[0].value;
		xhr.send(s);
	}
}

function nn(){
		var str="";
		for(var i=0;i<4;i++){
			str+=(parseInt(Math.random()*16)).toString(16);
		}
		return str;
}

</script>

		